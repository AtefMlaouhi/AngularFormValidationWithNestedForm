<mat-card class="mat-elevation-z8">
  <mat-card-header>
    Formulaire Angular avec nested component, reactive forms in Angular
  </mat-card-header>
  <mat-card-content>
    <mat-checkbox ngModel="fnameCheck" (change)="fnameCheck = !fnameCheck"
      >Set First name</mat-checkbox
    >
    <mat-checkbox ngModel="lnameCheck" (change)="lnameCheck = !lnameCheck"
      >Set Last name</mat-checkbox
    >

    <form
      #f="ngForm"
      [formGroup]="formToValidate"
      novalidate
      (ngSubmit)="submit(f)"
    >
      <am-mail-validator
        [formSubmitted]="f.submitted"
        formControlName="email"
      ></am-mail-validator>

      <am-nested-form
        [formSubmitted]="f.submitted"
        [setFname]="fnameCheck"
        [setLname]="lnameCheck"
        formControlName="info"
      ></am-nested-form>
      <button
        mat-raised-button
        color="primary"
        [disabled]="!f.valid"
        type="submit"
      >
        Submit
      </button>
    </form>
  </mat-card-content>
  <mat-card-actions fxLayoutAlign="center center">
    <button mat-button [color]="formToValidate?.valid ? 'primary' : 'warn'">
      Principal form
    </button>
    <button
      mat-button
      [color]="formToValidate.get('email')?.valid ? 'primary' : 'warn'"
    >
      Email form
    </button>
    <button
      mat-button
      [color]="formToValidate.get('info')?.valid ? 'primary' : 'warn'"
    >
      Secondary form
    </button>
  </mat-card-actions>
</mat-card>

{{ formToValidate.get('email').errors | json }}
